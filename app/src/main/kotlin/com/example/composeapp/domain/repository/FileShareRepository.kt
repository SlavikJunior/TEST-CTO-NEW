/*
 * Интерфейс репозитория для управления доступными файлами
 * 
 * Архитектурное обоснование:
 * - Разделяет логику работы с локальными и удаленными файлами
 * - Следует Single Responsibility Principle - отвечает только за файлы
 * - Использует Flow для реактивного обновления списка файлов
 * 
 * Технологические решения:
 * - JSON-over-TCP используется для получения списка файлов с удаленных устройств
 * - TCP выбран для надежной передачи (в отличие от UDP)
 * - JSON обеспечивает простую сериализацию/десериализацию без бинарных протоколов
 * - Flow позволяет UI автоматически обновляться при изменении файлов
 * 
 * Преимущества TCP:
 * - Гарантированная доставка пакетов в правильном порядке
 * - Контроль перегрузки и повторная передача
 * - Необходим для корректной передачи файлов
 */
package com.example.composeapp.domain.repository

import com.example.composeapp.domain.model.SharedFile
import kotlinx.coroutines.flow.Flow

/**
 * Репозиторий для управления файлами, доступными для обмена
 */
interface FileShareRepository {
    /**
     * Получает список локальных файлов из общей папки
     * 
     * @return Flow со списком файлов, обновляется при изменении содержимого папки
     */
    fun getLocalFiles(): Flow<List<SharedFile>>
    
    /**
     * Получает список файлов с удаленного устройства через TCP соединение
     * 
     * @param deviceId Идентификатор устройства
     * @return Список файлов, доступных на удаленном устройстве
     * @throws Exception если не удалось подключиться или получить список
     */
    suspend fun getRemoteFiles(deviceId: String): List<SharedFile>
    
    /**
     * Обновляет список локальных файлов (сканирует общую папку)
     */
    suspend fun refreshLocalFiles()
}
